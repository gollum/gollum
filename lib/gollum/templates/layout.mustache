<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-type" content="text/html;charset=utf-8">
  <meta name="MobileOptimized" content="width">
  <meta name="HandheldFriendly" content="true">
  <meta name="viewport" content="width=device-width">
  {{#sprockets_stylesheet_tag}}app{{/sprockets_stylesheet_tag}}
  {{#sprockets_stylesheet_tag}}print print{{/sprockets_stylesheet_tag}}


  {{#css}}<link rel="stylesheet" type="text/css" href="{{custom_css}}" media="all">{{/css}}
  {{#noindex}}<meta name="robots" content="noindex, nofollow" />{{/noindex}}

  <script>
  var criticMarkup = '{{critic_markup}}';
	var baseUrl = '{{base_url}}';
  var showLocalTime = {{{show_local_time}}};
	var uploadDest = 'uploads';
	var perPageUploads = '{{per_page_uploads}}';
	if (perPageUploads == 'true') {
	  uploadDest = uploadDest + window.location.pathname.replace(/.*gollum\/[-\w]+\//, "/").replace(/\.[^/.]+$/, "").replace(baseUrl, "")
	}
	{{#page}}
	  var pageFullPath = '{{escaped_url_path}}';
    var pageFormat   = '{{format}}';
	{{/page}}
  {{#has_search_terms}}
    var searchTerms  = [{{#search_terms}}'{{.}}', {{/search_terms}}
    ];
  {{/has_search_terms}}
  {{#is_create_page}}
    var default_markup = '{{default_markup}}';
  {{/is_create_page}}
  {{#has_editor}}
     var default_keybinding = '{{default_keybinding}}';
  {{/has_editor}}

  </script>
  {{#sprockets_javascript_tag}}app{{/sprockets_javascript_tag}}
  {{#has_editor}}
  {{#sprockets_javascript_tag}}editor{{/sprockets_javascript_tag}}
  {{/has_editor}}
  
  {{#mathjax}}
  <script type="text/javascript">
  
    window.MathJax = {
      loader: {
        paths: {
          gollum: '[mathjax]/mathjax_root',
        },
        source: {
          'output/svg': '[gollum]/svg/svg',
          'output/svg/fonts/tex': '[gollum]/svg/tex',
          'ui/safe': '[gollum]/ui/safe',
        },
        load: ['ui/safe'],
      },
      chtml: {
        fontURL: '{{sprockets_asset_root}}',
      },
      tex: {
        inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
        displayMath: [ ['$$', '$$'], ['\\[', '\\]'] ],
        processEscapes: true,
      },
      options: {
        safeOptions: {
          allow: {
            //
            //  Values can be "all", "safe", or "none"
            //
            URLs:    'none',
            classes: 'none',
            cssIDs:  'none',
            styles:  'none',
          },
        },
      },
    }
    
  </script>
  {{#mathjax_config}}
  <script type="text/javascript" src="{{mathjax_config_path}}"></script>
  {{/mathjax_config}}
  <script async type="text/javascript" src="{{#sprockets_asset_path}}mathjax.js{{/sprockets_asset_path}}"></script>
  {{/mathjax}}
  
  {{#mermaid}}
  <script>
  var mermaid_conf = {
    startOnLoad: true,
    securityLevel: 'strict'
  };
  </script>
  {{/mermaid}}
  
  {{#js}}<script type="text/javascript" src="{{custom_js}}"></script>{{/js}}

  {{#mermaid}}
  {{#sprockets_javascript_tag}}mermaid{{/sprockets_javascript_tag}}
  <script>
    mermaid.initialize(mermaid_conf);
  </script>
  {{/mermaid}}
  
  <title>{{title}}</title>
</head>
<body>
<div class="container-lg clearfix">
{{{yield}}}
</div>
</body>
</html>
